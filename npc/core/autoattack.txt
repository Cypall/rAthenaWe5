//
//	Author		Shakto
//		@reloadnpc npc/core/autoattack.txt

function	script	F_AutoAT	{
	disable_items;
	doevent "AutoAI_Main::OnMainMenu";
	end;
}

-	script	AutoAI_Main	-1,{
	end;

OnMainMenu:
		sc_end SC_AUTOATTACK;
	
main_menu:
	autostart(false);
	clear2();
	.@menu$ = "[^FF0000^000000 ^2f00ffAuto Attack^000000 ^FF0000^000000]";
	mes .@menu$;
	
	if(sc_check(SC_AUTOATTACK))
		.@main_menu = select(" ^ff0000~^000000 ปิดระบบ Auto Attack"," ^ff0000~^000000 ตั้งค่า"," ^ff0000~^000000 ยกเลิก");
	else
		.@main_menu = select(" ^ff0000~^000000 เปิดระบบ Auto Attack"," ^ff0000~^000000 ตั้งค่า"," ^ff0000~^000000 ยกเลิก");

	if( .@main_menu == 1 )
		callsub OnMainAI;

	if( .@main_menu == 2 )
		goto(config_menu);
	
	end;

config_menu:
	clear2();
	.@menu$ = "[^FF0000^000000 ^2f00ffตั้งค่า^000000 ^FF0000^000000]";
	mes .@menu$;

	// To disable an option, comment the line
	menu	" ^ff0000~^000000 ย้อนกลับ",main_menu,
			" ^ff0000~^000000 โจมตีปกติ",melee_attack,
			" ^ff0000~^000000 ฟื้นฟู",regeneration_menu,
			" ^ff0000~^000000 สกิลโจมตี",attackskills_menu,
			" ^ff0000~^000000 สกิลซับพอร์ท",buffskills_menu,
			" ^ff0000~^000000 ยาบัฟ",buffitems_menu,
			" ^ff0000~^000000 วาร์ป/วิง",teleport_menu,
			" ^ff0000~^000000 กำหนดเป้าหมาย",monsters_menu,
			" ^ff0000~^000000 กำหนดการเก็บไอเทม",pickupitems_menu;
	end;

pickupitems_menu:
	clear2();
	.@menu$ = "[^FF0000^000000 ^2f00ffกำหนดการเก็บไอเทม^000000 ^FF0000^000000]";

	mes .@menu$;
	mes autoattackstrinfo(GET_INFO_PICKUP_ITEM,0);

	.@pickupitems_menu = select(" ^ff0000~^000000 ตั้งค่ากับเก็บไอเทม"," ^ff0000~^000000 เพิ่มไอเทม"," ^ff0000~^000000 ลบไอเทม"," ^ff0000~^000000 ล้างรายการ"," ^ff0000~^000000 ยกเลิก");

	switch(.@pickupitems_menu){
		case 1:
			.@pickup_config_choice = 0;
			// every item = 0
			// on the list = 1
			// no item = 2
			switch(autoattackintinfo(GET_INFO_PICKUP_ITEM,2)){
				case 0:
					.@pickupitems_config_menu  = select(" ^ff0000~^000000 เก็บไอเทมเฉพาะในรายการ"," ^ff0000~^000000 ไม่เก็บไอเทมใดๆ"," ^ff0000~^000000 ยกเลิก");
					switch(.@pickupitems_config_menu){
						case 1:
							.@pickup_config_choice = 1;
							break;
						case 2 :
							.@pickup_config_choice = 2;
							break;
						case 3 :
							goto(pickupitems_menu);
							break;
					}
					break;
				case 1:
					.@pickupitems_config_menu  = select(" ^ff0000~^000000 เก็บทุกไอเทม"," ^ff0000~^000000 ไม่เก็บไอเทมใดๆ"," ^ff0000~^000000 ยกเลิก");
					switch(.@pickupitems_config_menu){
						case 1:
							.@pickup_config_choice = 0;
							break;
						case 2 :
							.@pickup_config_choice = 2;
							break;
						case 3 :
							goto(pickupitems_menu);
							break;
					}
					break;
				case 2:
					.@pickupitems_config_menu  = select(" ^ff0000~^000000 เก็บทุกไอเทม"," ^ff0000~^000000 เก็บไอเทมเฉพาะในรายการ"," ^ff0000~^000000 ยกเลิก");
					switch(.@pickupitems_config_menu){
						case 1:
							.@pickup_config_choice = 0;
							break;
						case 2 :
							.@pickup_config_choice = 1;
							break;
						case 3 :
							goto(pickupitems_menu);
							break;
					}
					break;				
			}
			autoattackset("9;2;" + .@pickup_config_choice);
			break;
		case 2:
			clear();
			mes .@menu$;
			mes "ระบุไอเทมไอดีเพื่อเพิ่มเข้ารายการ (สูงสุด 20 ไอเทม)";
			do {
				input .@itempickup_id;
			} while(.@itempickup_id < 1);

			autoattackset("9;1;" + .@itempickup_id);

			break;
		case 3:
			if(autoattackintinfo(GET_INFO_PICKUP_ITEM,1) > 0){
				mes "ระบุไอเทมไอดีที่ต้องการลบออกจากรายการ";

				do {
					input .@itempickup_id;
				} while(.@itempickup_id < 1);
				autoattackset("9;0;" + .@itempickup_id);
			} else {
				clear();
				mes .@menu$;
				mes "โทษที, เจ้าไม่มีไอเทมในรายการ";
				next;
			}

			break;
		case 4:
			autoattackset("9;-1;0");
			break;

		case 5:
			goto(config_menu);
			break;
	}

	goto(pickupitems_menu);
	end;

monsters_menu:
	clear2();
	.@menu$ = "[^FF0000^000000 ^2f00ffกำหนดเป้าหมาย^000000 ^FF0000^000000]";

	mes .@menu$;
	mes autoattackstrinfo(GET_INFO_MOB,0);

	.@monsters_menu = select(" ^ff0000~^000000 เพิ่มมอนสเตอร์"," ^ff0000~^000000 ลบมอนสเตอร์"," ^ff0000~^000000 ล้างรายการ",autoattackintinfo(GET_INFO_MOB)?" ^ff0000~^000000 โจมตีมอนสเตอร์ Aggressive":" ^ff0000~^000000 ไม่สนใจมอนสเตอร์ Aggressive"," ^ff0000~^000000 ยกเลิก");
	switch(.@monsters_menu){
		case 1:
			clear();
			mes .@menu$;
			mes "ระบุไอดีมอนสเตอร์ (สูงสุด 20)";
			mes autoattackstrinfo(GET_INFO_MOB,-1);
			do {
				input .@mob_id;
			} while(.@mob_id < 1);

			autoattackset("8;1;" + .@mob_id + ";" + autoattackintinfo(GET_INFO_MOB));
			break;

		case 2:
			if(autoattackintinfo(GET_INFO_MOB,1) > 0){
				mes "ระบุไอดีมอนสเตอร์ที่ต้องการลบออกจากรายการ";

				do {
					input .@mob_id;
				} while(.@mob_id < 1);
				autoattackset("8;0;" + .@mob_id + ";" + autoattackintinfo(GET_INFO_MOB));
			} else {
				clear();
				mes .@menu$;
				mes "โทษที, เจ้าไม่มีมอนสเตอร์ในรายการ";
				next;
			}
			break;

		case 3:
			autoattackset("8;-1;0;0");
			break;

		case 4:
			if(autoattackintinfo(GET_INFO_MOB))
				autoattackset("8;0;0;0");
			else
				autoattackset("8;0;0;1");
			break;

		case 5:
			goto(config_menu);
			break;
	}

	goto(monsters_menu);
	end;

teleport_menu:
	clear();
	.@menu$ = "[^FF0000^000000 ^2f00ffวาร์ป/วิง^000000 ^FF0000^000000]";

	mes .@menu$;
	mes autoattackstrinfo(GET_INFO_TELEPORT);

	if(autoattackintinfo(GET_INFO_TELEPORT) == 1)
		.@teleport_menu_txt$ = "เปิดใช้เทเลพอร์ทสกิล";
	else
		.@teleport_menu_txt$ = "ปิดใช้เทเลพอร์ทสกิล";

	if(autoattackintinfo(GET_INFO_TELEPORT,1) == 1)
		.@teleport_menu_txt$ += ":เปิดใช้งาน Fly Wing";
	else
		.@teleport_menu_txt$ += ":ปิดใช้งาน Fly Wing";
		
	.@teleport_menu_txt$ += ":ตั้งค่า / ปรับ HP ขั้นต่ำ :ตั้งค่า / ปรับ ดีเลย์เลเทพอร์ท:ยกเลิก";

	.@teleport_menu = select(.@teleport_menu_txt$);

	switch(.@teleport_menu){
		case 1:
			if(autoattackintinfo(GET_INFO_TELEPORT))
				autoattackset("7;0;0");
			else
				autoattackset("7;0;1");
			break;
		case 2:
			if(autoattackintinfo(GET_INFO_TELEPORT,1))
				autoattackset("7;1;0");
			else
				autoattackset("7;1;1");
			break;
		case 3:
			do {
				clear();
				mes .@menu$;
				mes "เลือก % HP ขั้นต่ำที่จะวาร์ปเมื่อถูกโจมตี";
				mes "ขั้นต่ำคือ 5, สูงสุดคือ 90 (0 ปิดใช้งาน)";
				input .@teleport_minhpvalue;
			} while(.@teleport_minhpvalue != 0 && (.@teleport_minhpvalue < 5 || .@teleport_minhpvalue > 90));
			autoattackset("7;2;"+.@teleport_minhpvalue);
			break;
		case 4:
			do {
				clear();
				mes .@menu$;
				mes "เลือกดีเลย์เลเทพอร์ทที่จะวาร์ปเมื่อไม่พบมอนสเตอร์หลังจากดีเลย์นี้";
				mes "ขั้นต่ำคือ 2, สูงสุดคือ 600 (0 ปิดใช้งาน)";
				input .@teleport_delayvalue;
			} while(.@teleport_delayvalue != 0 && (.@teleport_delayvalue < 2 || .@teleport_delayvalue > 600));
			autoattackset("7;3;"+.@teleport_delayvalue);
			break;
		default:
			goto(config_menu);
			break;
	}

	goto(teleport_menu);
	end;

melee_attack:
	clear2();
	.@menu$ = "[^FF0000^000000 ^2f00ffโจมตีปกติ^000000 ^FF0000^000000]";

	mes .@menu$;
	mes autoattackstrinfo(GET_INFO_ATTACK);

	.@melee_menu = select(autoattackintinfo(GET_INFO_ATTACK)?"^ff0000~^000000 เปิดใช้งาน":"^ff0000~^000000 ปิดใช้งาน","^ff0000~^000000 ยกเลิก");

	if( .@melee_menu == 1 ){
		if(autoattackintinfo(GET_INFO_ATTACK))
			autoattackset("6;0");
		else
			autoattackset("6;1");
		clear();

		goto(melee_attack);
	}

	goto(config_menu);
	end;

regeneration_menu:
	clear2();
	.@menu$ = "[^FF0000^000000 ^2f00ffฟื้นฟู^000000 ^FF0000^000000]";
	
	mes .@menu$;
	menu	" ^ff0000~^000000 ย้อนกลับ",config_menu,
			" ^ff0000~^000000 สกิล Heal ต่างๆ",heal_menu,
			" ^ff0000~^000000 ยาปั้ม HP/SP",potion_menu,
			" ^ff0000~^000000 นั่งเด้ง HP/SP",sit_regen_menu;
	end;

heal_menu:
	clear2();
	.@menu$ = "[^FF0000^000000 ^2f00ffสกิล Heal ต่างๆ^000000 ^FF0000^000000]";

	mes .@menu$;
	mes autoattackstrinfo(GET_INFO_HEAL,0);

	.@heal_menu = select(" ^ff0000~^000000 เพิ่มแก้ไขสกิล"," ^ff0000~^000000 ลบสกิล"," ^ff0000~^000000 ยกเลิก");
	if( .@heal_menu == 1 ){
		clear();
		mes .@menu$;
		mes "โปรดระบุเลขสกิลที่ต้องการใช้งาน";
		mes autoattackstrinfo(GET_INFO_HEAL,-1);

		input .@heal_skillid;
		if(.@heal_skillid < 1 || !skillinfocheck(SKILL_INFO_HEAL,.@heal_skillid))
			goto(heal_menu);

		do{
			clear();
			mes .@menu$;
			mes "โปรดระบุเลเวลของสกิลที่ต้องการใช้งาน";
			mes "[" + skillstrinfo(.@heal_skillid) + "]" + " - Max lv : " + getskilllv(.@heal_skillid);
			input .@heal_skilllv;
		} while(.@heal_skilllv < 1 || .@heal_skilllv > getskilllv(.@heal_skillid));

		do {
			clear();
			mes .@menu$;
			mes "ระบุค่า HP % ที่ต้องการใช้สกิล (เช่น 10 คือใช้สกิลเมื่อ HP ต่ำกว่า 10%)";
			mes "ต่ำสุดคือ 5, สูงสุดคือ 90";
			mes "[" + skillstrinfo(.@heal_skillid) + "]" + " - Lv : " + .@heal_skilllv;
			input .@heal_minhpvalue;
		} while(.@heal_minhpvalue < 5 || .@heal_minhpvalue > 90);
		autoattackset("0;1;"+ .@heal_skillid + ";" + .@heal_skilllv + ";" + .@heal_minhpvalue);
		clear();
		goto(heal_menu);
	}
	if( .@heal_menu == 2 ){
		if(autoattackintinfo(GET_INFO_HEAL) == 0){
			clear();
			mes .@menu$;
			mes "ไม่มีสกิลที่ใช้งานอยู่ให้ลบขณะนี้";
			next;
			goto(heal_menu);
		} else {
			mes "โปรดระบุเลขสกิลที่ต้องการลบ";
			input .@heal_skillid;
			if(.@heal_skillid < 1 )
				goto(heal_menu);

			autoattackset("0;0;"+ .@heal_skillid + ";0;0");
			goto(heal_menu);
		}
	}

	goto(regeneration_menu);
	end;

potion_menu:
	clear();
	.@menu$ = "[^FF0000^000000 ^2f00ffยาปั้ม HP/SP^000000 ^FF0000^000000]";
	if(autoattackintinfo(GET_INFO_POTION) == 0){
		mes .@menu$;
		mes "ท่านไม่มียาปั้ม";
		next;
		goto(regeneration_menu);
	}

	mes .@menu$;
	mes autoattackstrinfo(GET_INFO_POTION);

	.@potion_menu = select(" ^ff0000~^000000 เพิ่มยาปั้ม"," ^ff0000~^000000 ลบยาปั้้ม"," ^ff0000~^000000 ยกเลิก");

	if( .@potion_menu == 1 ){
		clear();
		mes .@menu$;
		mes autoattackstrinfo(GET_INFO_POTION,-1);
		mes "โปรดระบุเลขไอดียาปั้ม";

		input .@potion_id;

		do {
			clear();
			mes .@menu$;
			mes "ระบุค่า HP % ที่ต้องการใช้ยาปั้ม (เช่น 10 คือใช้สกิลเมื่อ HP ต่ำกว่า 10%)";
			mes "ต่ำสุดคือ 5, สูงสุดคือ 90 (0 ปิดใช้งาน)";
			input .@potion_minhpvalue;
		} while(.@potion_minhpvalue != 0 && (.@potion_minhpvalue < 5 || .@potion_minhpvalue > 90));

		do {
			clear();
			mes .@menu$;
			mes "ระบุค่า SP % ที่ต้องการใช้ยาปั้ม (เช่น 10 คือใช้สกิลเมื่อ SP ต่ำกว่า 10%)";
			mes "ต่ำสุดคือ 5, สูงสุดคือ 90 (0 ปิดใช้งาน)";			
			input .@potion_minspvalue;
		} while(.@potion_minspvalue != 0 && (.@potion_minspvalue < 5 || .@potion_minspvalue > 90));

		autoattackset("1;1;"+ .@potion_id + ";" + .@potion_minhpvalue + ";" + .@potion_minspvalue);
		clear();

		goto(potion_menu);
	}
	if( .@potion_menu == 2 ){
		if(autoattackintinfo(GET_INFO_POTION) == 0){
			clear();
			mes .@menu$;
			mes "ไม่มียาปั้มให้ลบ";
			next;
			goto(potion_menu);
		} else {
			mes "โปรดระบุเลขไอดียาปั้มที่ต้องการลบ";
			input .@potion_id;
			autoattackset("1;0;"+ .@potion_id + ";0;0");
			goto(potion_menu);
		}
	}

	goto(regeneration_menu);
	end;

sit_regen_menu:
	clear();
	.@menu$ = "[Sit to Rest]";

	mes .@menu$;
	mes autoattackstrinfo(GET_INFO_SIT,0); // status
	mes autoattackstrinfo(GET_INFO_SIT,1); // hp
	mes autoattackstrinfo(GET_INFO_SIT,2); // sp

	.@sit_regen_menu = select(autoattackintinfo(GET_INFO_SIT,0)?"ปิด:ปรับแต่ง":"เปิด","ยกเลิก");
	if( (.@sit_regen_menu == 1 && !autoattackintinfo(GET_INFO_SIT))
		|| (.@sit_regen_menu == 2 && autoattackintinfo(GET_INFO_SIT))){
		clear();
		mes .@menu$;
		mes "เลือกค่า HP % ที่ต้องการนั่ง (เช่น 10 คือนั่งเด้งเมื่อ HP ต่ำกว่า 10%)";
		mes "ต่ำสุดคือ 5, สูงสุดคือ 90 (0 ปิดใช้งาน)";

		do {
			input .@sit_regen_minhpvalue;
		} while(.@sit_regen_minhpvalue != 0 && (.@sit_regen_minhpvalue < 5 || .@sit_regen_minhpvalue > 90));

		if(.@sit_regen_minhpvalue > 0){
			clear();
			mes .@menu$;
			mes "เลือกค่า HP % ที่ต้องการยืน (เช่น 10 คือยืนเมื่อ HP มากกว่า 10%)";
			mes "ต่ำสุดคือ 5, สูงสุดคือ 90 (0 ปิดใช้งาน)";
			mes "ต้องมากกว่าค่า HP % ที่นั่ง : " + .@sit_regen_minhpvalue;

			do {
				input .@sit_regen_maxhpvalue;
			} while((.@sit_regen_maxhpvalue != 0 && (.@sit_regen_maxhpvalue < 5 || .@sit_regen_maxhpvalue > 90)) || (.@sit_regen_minhpvalue >= .@sit_regen_maxhpvalue));
		}

		clear();
		mes .@menu$;
		mes "เลือกค่า SP % ที่ต้องการนั่ง (เช่น 10 คือนั่งเด้งเมื่อ SP ต่ำกว่า 10%)";
		mes "ต่ำสุดคือ 5, สูงสุดคือ 90 (0 ปิดใช้งาน)";

		do {
			input .@sit_regen_minspvalue;
		} while(.@sit_regen_minspvalue != 0 && (.@sit_regen_minspvalue < 5 || .@sit_regen_minspvalue > 90));

		if(.@sit_regen_minspvalue > 0){
			clear();
			mes .@menu$;
			mes "เลือกค่า SP % ที่ต้องการยืน (เช่น 10 คือยืนเมื่อ SP มากกว่า 10%)";
			mes "ต่ำสุดคือ 5, สูงสุดคือ 90 (0 ปิดใช้งาน)";
			mes "ต้องมากกว่าค่า SP % ที่นั่ง : " + .@sit_regen_minspvalue;

			do {
				input .@sit_regen_maxspvalue;
			} while((.@sit_regen_maxspvalue != 0 && (.@sit_regen_maxspvalue < 5 || .@sit_regen_maxspvalue > 90)) || (.@sit_regen_minspvalue >= .@sit_regen_maxspvalue));
		}
		
		autoattackset("2;1;"+ .@sit_regen_minhpvalue + ";" + .@sit_regen_maxhpvalue + ";" + .@sit_regen_minspvalue + ";" + .@sit_regen_maxspvalue);

	} else if( .@sit_regen_menu == 1 && autoattackintinfo(2,0)){
		autoattackset("2;0;0;0;0;0");
	} else {
		clear();
		goto(regeneration_menu);
	}

	clear();
	goto(sit_regen_menu);
	end;

buffskills_menu:
	clear();
	.@menu$ = "[^FF0000^000000 ^2f00ffสกิลบัฟ^000000 ^FF0000^000000]";

	mes .@menu$;
	mes autoattackstrinfo(GET_INFO_SUPPORT_SKILL,0);
	
	.@buffskills_menu = select(" ^ff0000~^000000 เพิ่มสกิล"," ^ff0000~^000000 แก้ไขสกิล"," ^ff0000~^000000 ลบสกิล"," ^ff0000~^000000 ยกเลิก");

	if( .@buffskills_menu < 3 ){
		if( .@buffskills_menu == 1 ){
			clear();
			mes .@menu$;
			mes "ระบุเลขสกิลที่ต้องการ";
			mes autoattackstrinfo(GET_INFO_SUPPORT_SKILL,-1);
		} else {
			if(autoattackintinfo(GET_INFO_SUPPORT_SKILL) == 0){
				mes .@menu$;
				mes "ไม่มีสกิลบัฟที่ใช้งานอยู่";
				next;
				goto(buffskills_menu);
			}
			mes "ระบุเลขสกิลที่ต้องการ";
		}

		input .@buff_skillid;
		if(.@buff_skillid < 1  || !skillinfocheck(SKILL_INFO_SUPPORT,.@buff_skillid))
			goto(buffskills_menu);

		if(!skillinfocheck(SKILL_INFO_SUPPORT,.@buff_skillid)){
			clear();
			mes .@menu$;
			mes "เสียใจด้วย, ท่านไม่มีสกิลที่เลือกหรือไม่ใช่สกิลซัพพอร์ท";
			next;
			goto(buffskills_menu);
		}	

		do{
			clear();
			mes .@menu$;
			mes "เลือกเลเวลของสกิลที่ต้องการใช้งาน";
			mes "[" + skillstrinfo(.@buff_skillid) + "]" + " - Max lv : " + getskilllv(.@buff_skillid);
			input .@buff_skilllv;
		} while(.@buff_skilllv < 1 || .@buff_skilllv > getskilllv(.@buff_skillid));

		autoattackset("3;1;"+ .@buff_skillid + ";" + .@buff_skilllv);
		clear();

		goto(buffskills_menu);
	} else if( .@buffskills_menu == 3 ){
		if(autoattackintinfo(GET_INFO_SUPPORT_SKILL) == 0){
			mes .@menu$;
			mes "ไม่มีสกิลบัฟที่ใช้งานอยู่";
			next;
			goto(buffskills_menu);
		} else {
			mes "ระบุเลขสกิลที่ต้องการลบ";
			input .@buff_skillid;
			if(.@buff_skillid < 1 )
				goto(buffskills_menu);

			if(!skillinfocheck(SKILL_INFO_SUPPORT,.@buff_skillid)){
				clear();
				mes .@menu$;
				mes "เสียใจด้วย, ท่านไม่มีสกิลที่เลือกหรือไม่ใช่สกิลซัพพอร์ท";
				next;
				goto(buffskills_menu);
			}
			autoattackset("3;0;"+ .@buff_skillid + ";0");
			goto(buffskills_menu);
		}
	}

	goto(config_menu);
	end;


attackskills_menu:
	clear();
	.@menu$ = "[^FF0000^000000 ^2f00ffสกิลโจมตี^000000 ^FF0000^000000]";

	mes .@menu$;
	mes autoattackstrinfo(GET_INFO_SKILL_RATE,0);
	mes "_____________";
	mes autoattackstrinfo(GET_INFO_ATTACK_SKILL,0);

	.@attackskills_menu = select(" ^ff0000~^000000 เพิ่มสกิล"," ^ff0000~^000000 แก้ไขสกิล"," ^ff0000~^000000 ลบสกิล"," ^ff0000~^000000 ปรับเปลี่ยน % ใช้สกิล"," ^ff0000~^000000 ยกเลิก");	
	if( .@attackskills_menu < 3 ){
		if( .@attackskills_menu == 1 ){
			clear();
			mes .@menu$;
			mes "ระบุเลขสกิลที่ต้องการ";
			mes autoattackstrinfo(GET_INFO_ATTACK_SKILL,-1);
		} else {
			if(autoattackintinfo(GET_INFO_ATTACK_SKILL) == 0){
				mes .@menu$;
				mes "ไม่มีสกิลโจมตีที่ใช้งานอยู่";
				next;
				goto(attackskills_menu);
			}
			mes "ระบุเลขสกิลที่ต้องการ";
		}

		input .@attack_skillid;
		if(.@attack_skillid < 1 || !skillinfocheck(SKILL_INFO_ATTACK,.@attack_skillid) )
			goto(attackskills_menu);

		do{
			clear();
			mes .@menu$;
			mes "โปรดเลือกเลเวลของสกิลที่ต้องการใช้งาน";
			mes "[" + skillstrinfo(.@attack_skillid) + "]" + " - Max lv : " + getskilllv(.@attack_skillid);
			input .@attack_skilllv;
		} while(.@attack_skilllv < 1 || .@attack_skilllv > getskilllv(.@attack_skillid));

		autoattackset("4;1;"+ .@attack_skillid + ";" + .@attack_skilllv);
		clear();

		goto(attackskills_menu);
	} else if(.@attackskills_menu == 3) {
		if(autoattackintinfo(GET_INFO_ATTACK_SKILL) == 0){
			mes .@menu$;
			mes "ไม่มีสกิลโจมตีที่ใช้งานอยู่";
			next;
			goto(attackskills_menu);
		} else {
			mes "ระบุเลขสกิลที่ต้องการลบ";
			input .@attack_skillid;
			if(.@attack_skillid < 1 )
				goto(attackskills_menu);

			if(!skillinfocheck(SKILL_INFO_ATTACK,.@attack_skillid)){
				clear();
				mes .@menu$;
				mes "เสียใจด้วย, ท่านไม่มีสกิลที่เลือกหรือไม่ใช่สกิลโจมตี";
				next;
				goto(attackskills_menu);
			}
			autoattackset("4;0;"+ .@attack_skillid + ";0");
			goto(attackskills_menu);
		}
	} else if(.@attackskills_menu == 4) {
		clear();
		mes .@menu$;
		mes autoattackstrinfo(GET_INFO_SKILL_RATE,0);
		mes "โปรดระบุ % โอกาสใช้สกิล (0-100)";
		input .@attack_rate,0,100;
		autoattackset("10;"+ .@attack_rate);
		goto(attackskills_menu);
	}

	goto(config_menu);
	end;

buffitems_menu:
	clear();
	.@menu$ = "[^FF0000^000000 ^2f00ffไอเทมบัฟ^000000 ^FF0000^000000]";

	mes .@menu$;
	mes autoattackstrinfo(GET_INFO_BUFF_ITEM,0);

	.@buffitems_menu = select(" ^ff0000~^000000 เพิ่ม / แก้ไขไอเทมบัฟ"," ^ff0000~^000000 ลบไอเทมบัฟ"," ^ff0000~^000000 ยกเลิก");
	if( .@buffitems_menu == 1 ){
		mes "เลือกไอเทมที่ต้องการใช้งาน";
		mes autoattackstrinfo(GET_INFO_BUFF_ITEM,-1);

		input .@buffitem_id;
		if(.@buffitem_id <= 0 )
			goto(buffitems_menu);

		autoattackset("5;1;"+ .@buffitem_id + ";");
		clear();

		goto(buffitems_menu);
	}
	if( .@buffitems_menu == 2 ){
		if(autoattackintinfo(GET_INFO_BUFF_ITEM) == 0){
			clear();
			mes .@menu$;
			mes "ไม่มีไอเทมบัฟที่ใช้งานอยู่";
			next;
			goto(buffitems_menu);
		} else {
			mes "ระบุไอเทมไอดีที่ต้องการลบออกจากรายการ";

			autoattackset("5;0;"+ .@buffitem_id + ";");
			goto(buffitems_menu);
		}
	}
	goto(config_menu);
	end;
}